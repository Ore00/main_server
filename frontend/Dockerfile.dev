FROM node:20-alpine

WORKDIR /app

COPY package*.json ./

ENV NPM_CONFIG_LEGACY_PEER_DEPS=true
ENV NPM_CONFIG_STRICT_PEER_DEPS=false
RUN npm install


COPY . .

ARG FRONTEND_PORT
ENV FRONTEND_PORT=${FRONTEND_PORT}
EXPOSE 80
EXPOSE ${FRONTEND_PORT}
CMD ["npm", "run", "dev"]
